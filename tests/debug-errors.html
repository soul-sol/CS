<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ì—ëŸ¬ ë””ë²„ê·¸</title>
    <style>
        body { 
            font-family: monospace; 
            padding: 20px; 
            background: #1a1a1a; 
            color: #fff;
        }
        iframe {
            width: 100%;
            height: 400px;
            border: 2px solid #333;
            margin: 10px 0;
        }
        .error-log {
            background: #2a1a1a;
            border: 1px solid #f44336;
            padding: 10px;
            margin: 5px 0;
            color: #ff9999;
        }
        button {
            padding: 10px 20px;
            margin: 5px;
            background: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
        }
        button:hover { background: #45a049; }
    </style>
</head>
<body>
    <h1>ğŸ” í˜ì´ì§€ ì—ëŸ¬ ë””ë²„ê·¸</h1>
    
    <button onclick="checkPage('index.html')">index.html í™•ì¸</button>
    <button onclick="checkPage('members.html')">members.html í™•ì¸</button>
    <button onclick="checkPage('team-builder.html')">team-builder.html í™•ì¸</button>
    
    <div id="errors"></div>
    
    <script>
        // ì „ì—­ ì—ëŸ¬ ìºì²˜
        window.addEventListener('error', (e) => {
            const errorDiv = document.createElement('div');
            errorDiv.className = 'error-log';
            errorDiv.innerHTML = `
                <strong>ì—ëŸ¬ ë°œìƒ!</strong><br>
                ë©”ì‹œì§€: ${e.message}<br>
                íŒŒì¼: ${e.filename}<br>
                ë¼ì¸: ${e.lineno}:${e.colno}<br>
                ìŠ¤íƒ: <pre>${e.error?.stack || 'N/A'}</pre>
            `;
            document.getElementById('errors').appendChild(errorDiv);
        });
        
        function checkPage(page) {
            const errorsDiv = document.getElementById('errors');
            errorsDiv.innerHTML = `<h2>${page} ì²´í¬ ì¤‘...</h2>`;
            
            // í˜ì´ì§€ë¥¼ iframeìœ¼ë¡œ ë¡œë“œ
            const iframe = document.createElement('iframe');
            iframe.src = '../' + page;
            iframe.onload = () => {
                try {
                    // iframe ë‚´ë¶€ì˜ window ê°ì²´ í™•ì¸
                    const iframeWindow = iframe.contentWindow;
                    
                    errorsDiv.innerHTML += `
                        <div style="background: #1a2a1a; padding: 10px; margin: 10px 0;">
                            <h3>${page} ì „ì—­ ê°ì²´ í™•ì¸</h3>
                            <div>firebaseDB: ${typeof iframeWindow.firebaseDB}</div>
                            <div>showMemberDetails: ${typeof iframeWindow.showMemberDetails}</div>
                            <div>updateMemberStats: ${typeof iframeWindow.updateMemberStats}</div>
                            <div>members ë³€ìˆ˜: ${typeof iframeWindow.members}</div>
                            <div>database ë³€ìˆ˜: ${typeof iframeWindow.database}</div>
                        </div>
                    `;
                    
                    // ì½˜ì†” ì—ëŸ¬ ì²´í¬
                    if (iframeWindow.console && iframeWindow.console.error) {
                        const originalError = iframeWindow.console.error;
                        iframeWindow.console.error = function(...args) {
                            errorsDiv.innerHTML += `
                                <div class="error-log">
                                    ì½˜ì†” ì—ëŸ¬: ${args.join(' ')}
                                </div>
                            `;
                            originalError.apply(iframeWindow.console, args);
                        };
                    }
                } catch (e) {
                    errorsDiv.innerHTML += `<div class="error-log">iframe ì ‘ê·¼ ì˜¤ë¥˜: ${e.message}</div>`;
                }
            };
            
            errorsDiv.appendChild(iframe);
        }
    </script>
</body>
</html>
