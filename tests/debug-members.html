<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Members 디버그</title>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .member { padding: 10px; margin: 5px; border: 1px solid #ddd; }
        .online { background-color: #d4edda; }
        .offline { background-color: #f8d7da; }
        .error { color: red; }
        .success { color: green; }
    </style>
</head>
<body>
    <h1>멤버 데이터 디버그</h1>
    <div id="status"></div>
    <div id="members"></div>
    
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyDKLNkEgvT9x5HqZTDQoR_4vvJLZpTQPxE",
            authDomain: "cs-homepage-5c3c2.firebaseapp.com",
            databaseURL: "https://cs-homepage-5c3c2-default-rtdb.firebaseio.com",
            projectId: "cs-homepage-5c3c2",
            storageBucket: "cs-homepage-5c3c2.appspot.com",
            messagingSenderId: "297914930278",
            appId: "1:297914930278:web:d0b96e0b5e9c9c5f8f8f8f"
        };

        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
        
        const statusDiv = document.getElementById('status');
        const membersDiv = document.getElementById('members');
        
        statusDiv.innerHTML = '<p>Firebase 연결 중...</p>';
        
        database.ref('members').on('value', (snapshot) => {
            const members = snapshot.val() || {};
            const memberArray = Object.entries(members);
            
            const onlineMembers = memberArray.filter(([k, m]) => !m.status || m.status === 'online');
            const offlineMembers = memberArray.filter(([k, m]) => m.status && m.status !== 'online');
            
            statusDiv.innerHTML = `
                <p class="success">✅ Firebase 연결 성공!</p>
                <p>총 멤버: ${memberArray.length}명</p>
                <p>온라인: ${onlineMembers.length}명 / 오프라인: ${offlineMembers.length}명</p>
            `;
            
            let html = '<h2>온라인 멤버</h2>';
            onlineMembers.forEach(([key, member]) => {
                html += `<div class="member online">${member.name} (${member.tier || 'no-tier'})</div>`;
            });
            
            html += '<h2>오프라인 멤버</h2>';
            offlineMembers.forEach(([key, member]) => {
                html += `<div class="member offline">${member.name} (${member.tier || 'no-tier'})</div>`;
            });
            
            membersDiv.innerHTML = html;
        }, (error) => {
            statusDiv.innerHTML = `<p class="error">❌ Firebase 오류: ${error.message}</p>`;
        });
    </script>
</body>
</html>
